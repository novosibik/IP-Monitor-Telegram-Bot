# IP Monitor Telegram Bot

–ú–æ–Ω–∏—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ IP/—Ö–æ—Å—Ç–æ–≤ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ Telegram, –æ—Ç—á—ë—Ç–∞–º–∏ (CSV/PNG/PDF), —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –º–∞—Å—Ç–µ—Ä–∞–º–∏, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ Prometheus-–º–µ—Ç—Ä–∏–∫–∞–º–∏.

> –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Linux (Ubuntu 24.04+). –ü–∏–Ω–≥ –∫–∞–∂–¥—ã–µ `N` —Å–µ–∫—É–Ω–¥, –∞–Ω—Ç–∏-—Ñ–ª–∞–ø–ø–µ—Ä, –∞–ª–µ—Ä—Ç—ã ¬´–ø–∞–¥–µ–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ¬ª, –æ—Ç—á—ë—Ç—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (daily/weekly/monthly) *per-user* —Å —É—á—ë—Ç–æ–º –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üîÑ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏**: ICMP `ping` —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫).
* üßØ **–ê–Ω—Ç–∏-—Ñ–ª–∞–ø–ø–µ—Ä**: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ `WARN_TH` –ø–æ–¥—Ä—è–¥ FAIL, ¬´–ø–∞–¥–µ–Ω–∏–µ¬ª –ø–æ—Å–ª–µ `CRIT_TH`, ¬´–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ¬ª –ø–æ—Å–ª–µ `SUCC_TH`.
* üîî **Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ø–∞–¥–µ–Ω–∏–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (—Å –≤—Ä–µ–º–µ–Ω–µ–º –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞ –∏ –æ–±—â–µ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é), –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.
* üë• **–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞**:

  * `admin`/`user`;
  * –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º (–ø–æ IP/Name);
  * –≤—ã–¥–∞—á–∞/–æ—Ç–∑—ã–≤ –ø—Ä–∞–≤ –ø–æ **–Ω–æ–º–µ—Ä–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤**.
* üó£ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞**: –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ ‚Üí –¥–∏–∞–ª–æ–≥ (—à–∞–≥–∏, `/back`, `/cancel`, –∞–≤—Ç–æ-—Ç–∞–π–º–∞—É—Ç).
* üìä **–û—Ç—á—ë—Ç—ã**: CSV/PNG/PDF, —Å—Ä–µ–¥–Ω–∏–π SLA, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π **—á–∞—Å–æ–≤–æ–π –ø–æ—è—Å** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —É—á—ë—Ç **—Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤**.
* üïí **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤**: daily/weekly/monthly, –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏.
* üß≠ **–ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ per-user**: –æ—Ç—á—ë—Ç—ã –∏ cron –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º TZ.
* üîÅ **/rebuildcron**: –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ cron –ø—Ä—è–º–æ –∏–∑ —á–∞—Ç–∞ (admin).
* üìà **Prometheus-–º–µ—Ç—Ä–∏–∫–∏**: `ip_up`, streak-–∏ —É—Å–ø–µ—Ö–æ–≤/–Ω–µ—É–¥–∞—á.
* üóÉ **–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: `config.json`, `targets.csv`.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
ip-monitor/
‚îú‚îÄ monitor.py               # –¥–µ–º–æ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ Telegram-–±–æ—Ç
‚îú‚îÄ report.py                # –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á—ë—Ç–æ–≤ (CSV/PNG/PDF) —Å TZ per-user
‚îú‚îÄ install_monitor.sh       # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, systemd, cron
‚îú‚îÄ ip-monitor.service       # –ø—Ä–∏–º–µ—Ä systemd unit (–æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–µ–Ω)
‚îú‚îÄ requirements.txt         # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ config.json              # –∫–æ–Ω—Ñ–∏–≥ (TOKEN, –ø–æ–ª—É—á–∞—Ç–µ–ª–∏, –ø–æ—Ä–æ–≥–∏, –∏ —Ç.–¥.)
‚îú‚îÄ targets.csv              # —Å–ø–∏—Å–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤: IP;Name;SLA_Target
‚îî‚îÄ reports/                 # –ø–∞–ø–∫–∞ –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
git clone https://github.com/<your-org>/ip-monitor.git
cd ip-monitor

# 1) –£–∫–∞–∂–∏—Ç–µ Telegram BOT TOKEN (–æ—Ç @BotFather) –≤ config.json
# 2) –ó–∞–ø–æ–ª–Ω–∏—Ç–µ recipients/targets –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

chmod +x install_monitor.sh
./install_monitor.sh
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
systemctl status ip-monitor
crontab -l         # —É–≤–∏–¥–∏—Ç–µ –±–ª–æ–∫ –º–µ–∂–¥—É "# BEGIN ip-monitor reports" ... "# END ..."
```

–í —á–∞—Ç–µ —Å –±–æ—Ç–æ–º:
`/whoami` ‚Üí –ø–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π `chat_id`.
–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –æ—Ç—á—ë—Ç–∞–º–∏ (—Å–º. –Ω–∏–∂–µ).

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### `config.json` (–ø—Ä–∏–º–µ—Ä)

```json
{
  "telegram_token": "PUT_YOUR_BOT_TOKEN_HERE",

  "recipients": [
    {
      "chat_id": "123456789",
      "role": "admin",
      "resources": "*",
      "timezone": "Asia/Almaty",
      "reports": {
        "daily":   {"enabled": true,  "hour": 9,  "minute": 0},
        "weekly":  {"enabled": true,  "dow": 1,   "hour": 9,  "minute": 5},
        "monthly": {"enabled": false, "day": 1,   "hour": 9,  "minute": 10}
      }
    },
    {
      "chat_id": "222222222",
      "role": "user",
      "resources": ["8.8.8.8", "Cloudflare DNS"],
      "timezone": "Europe/Berlin",
      "reports": {
        "daily":   {"enabled": true,  "hour": 10, "minute": 0},
        "weekly":  {"enabled": false, "dow": 1,   "hour": 9,  "minute": 0},
        "monthly": {"enabled": true,  "day": 1,   "hour": 11, "minute": 15}
      }
    }
  ],

  "check_interval": 30,
  "log_csv": "ip_monitor_log.csv",
  "reports_dir": "reports",

  "warn_threshold": 1,
  "fail_threshold": 3,
  "success_threshold": 2,

  "sla_target_percent": 99.9,
  "timezone": "UTC",

  "working_hours": { "enabled": false, "start": "09:00", "end": "21:00" },

  "prom_metrics_path": "ip_monitor.prom",
  "session_timeout_minutes": 15
}
```

### `targets.csv` (–ø—Ä–∏–º–µ—Ä)

```csv
IP;Name;SLA_Target
8.8.8.8;Google DNS;99.9
1.1.1.1;Cloudflare DNS;99.9
9.9.9.9;Quad9;99.7
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–π:**

* `recipients[].resources`: `*` ‚Äî –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ä–µ—Å—É—Ä—Å–∞–º; –ª–∏–±–æ –º–∞—Å—Å–∏–≤ IP/Name (—Å—Ç—Ä–æ–∫–∏).
* `reports.daily/weekly/monthly`: —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤ per-user.

  * `weekly.dow`: 1..7 (–ü–Ω..–í—Å).
  * `monthly.day`: 1..31.
* `timezone`: –≥–ª–æ–±–∞–ª—å–Ω—ã–π TZ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (IANA). `recipients[].timezone` –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ.
* `working_hours.enabled`: –µ—Å–ª–∏ `true` ‚Äî SLA/–ø—Ä–æ—Å—Ç–æ–π —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —á–∞—Å—ã (`start`..`end`).

---

## üßë‚Äçüíª –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –î–ª—è –≤—Å–µ—Ö

* `/help` ‚Äî —Å–ø—Ä–∞–≤–∫–∞
* `/whoami` ‚Äî –≤–∞—à `chat_id`
* `/resources` ‚Äî —Ä–µ—Å—É—Ä—Å—ã —Å –Ω–æ–º–µ—Ä–∞–º–∏
* `/myaccess` ‚Äî –≤–∞—à–∏ —Ä–µ—Å—É—Ä—Å—ã
* `/status` ‚Äî —Å—Ç–∞—Ç—É—Å –≤–∞—à–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (UP/DOWN, –ø—Ä–æ—Å—Ç–æ–π –∑–∞ —Å–µ–≥–æ–¥–Ω—è)
* `/cancel` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π –º–∞—Å—Ç–µ—Ä
* `/back` ‚Äî —à–∞–≥ –Ω–∞–∑–∞–¥ –≤ –º–∞—Å—Ç–µ—Ä–µ

### –ê–¥–º–∏–Ω

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**

* `/adduser [chat_id role [*|ip1,ip2|name1,name2]]` ‚Äî –º–∞—Å—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
* `/setrole [chat_id role]`
* `/deluser [chat_id]`
* `/listusers`
* `/listaccess <chat_id>`

**–†–µ—Å—É—Ä—Å—ã**

* `/addhost [ip name [sla]]` ‚Äî –º–∞—Å—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
* `/removehost [ip]` ‚Äî –º–∞—Å—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
* `/grantidx [chat_id idx_list]` ‚Äî –≤—ã–¥–∞—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ –Ω–æ–º–µ—Ä–∞–º (–Ω–∞–ø—Ä. `1,3-5`) ‚Äî –º–∞—Å—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
* `/revokeidx [chat_id idx_list]` ‚Äî –æ—Ç–æ–∑–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø ‚Äî –º–∞—Å—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

**–û—Ç—á—ë—Ç—ã –∏ TZ**

* `/report [daily|weekly|monthly]` ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
* `/setreport [chat_id period time on|off]` ‚Äî –º–∞—Å—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

  * daily: `HH:MM`
  * weekly: `DOW,HH:MM`
  * monthly: `DAY,HH:MM`
* `/getreport <chat_id>` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤
* `/settz [chat_id tz]` ‚Äî –∑–∞–¥–∞—Ç—å TZ (–º–∞—Å—Ç–µ—Ä –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤)
* `/gettz <chat_id>` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å TZ
* `/rebuildcron` ‚Äî **–ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å cron** –ø–æ —Ç–µ–∫—É—â–µ–º—É `config.json` (—É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è per-user TZ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)

**–ü—Ä–∏–º–µ—Ä—ã:**

```
/adduser
/setrole 222222222 user
/grantidx 222222222 1,3-4
/settz 222222222 Europe/Berlin
/setreport 222222222 daily 09:30 on
/rebuildcron
```

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

* `monitor.py`

  * –¶–∏–∫–ª –ø–∏–Ω–≥–æ–≤ (`ping -c 1 -W 2`), –ø–æ—Ä–æ–≥–∏ –∞–Ω—Ç–∏-—Ñ–ª–∞–ø–ø–µ—Ä–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (`ip_monitor_log.csv`).
  * Telegram polling: –∫–æ–º–∞–Ω–¥—ã/–º–∞—Å—Ç–µ—Ä–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–æ–≤ –≤ `.tg_sessions.json` (—Å `/back`, —Ç–∞–π–º–∞—É—Ç–æ–º).
  * Broadcast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ —Ç–µ–º, —É –∫–æ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É.
  * Prometheus —Å–Ω–∞–ø—à–æ—Ç –≤ `ip_monitor.prom`.
  * –ö–æ–º–∞–Ω–¥–∞ `/rebuildcron` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è cron-–±–ª–æ–∫–æ–≤ per-TZ/per-user.

* `report.py`

  * –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞ –≤ TZ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  * –ê–≥—Ä–µ–≥–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—á—ë—Ç —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤.
  * –≠–∫—Å–ø–æ—Ä—Ç CSV/PNG/–ø–ª–æ—Å–∫–∏–π PDF (ReportLab), –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram.

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ Telegram Bot API (polling). –•—Ä–∞–Ω–∏—Ç–µ `telegram_token` –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º `config.json`.
* –†–æ–ª—å `admin` –≤—ã–¥–∞–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º chat\_id.
* –§–∞–π–ª –ª–æ–≥–∞ –∏ –æ—Ç—á—ë—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π ‚Äî –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞—Ç–∞–ª–æ–≥—É.

---

## üß© –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus/Grafana

–§–∞–π–ª `ip_monitor.prom` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ü–∏–∫–ª–µ:

```
ip_up{ip="8.8.8.8",name="Google DNS"} 1
ip_fail_streak{ip="8.8.8.8",name="Google DNS"} 0
ip_succ_streak{ip="8.8.8.8",name="Google DNS"} 5
```

–ü–æ–¥–Ω–∏–º–∏—Ç–µ node\_exporter textfile collector –∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ —ç—Ç–æ–º—É —Ñ–∞–π–ª—É ‚Äî –¥–∞–ª—å—à–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –ø–∞–Ω–µ–ª–∏ –≤ Grafana.

---

## üõ† –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

* –ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram:

  * –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `telegram_token` –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —É —Å–µ—Ä–≤–µ—Ä–∞;
  * `journalctl -u ip-monitor -f` ‚Äî –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞.
* –û—Ç—á—ë—Ç—ã ¬´–Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç¬ª:

  * `crontab -l` ‚Äî –µ—Å—Ç—å –ª–∏ –±–ª–æ–∫ –º–µ–∂–¥—É `# BEGIN`/`# END`;
  * –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ `/rebuildcron`;
  * –ø—Ä–æ–≤–µ—Ä—å—Ç–µ TZ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—Ä–µ–º—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.
* –ü–∏–Ω–≥–∏ –≤—Å–µ–≥–¥–∞ ¬´DOWN¬ª:

  * –ø—Ä–æ–≤–µ—Ä—å—Ç–µ firewall/ICMP —É —Ü–µ–ª–∏;
  * —É–≤–µ–ª–∏—á—å—Ç–µ `-W` (—Ç–∞–π–º–∞—É—Ç) –≤ `ping_ok` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## ü§ù –í–∫–ª–∞–¥

PR –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!
–ò–¥–µ–∏ –¥–ª—è –¥–æ—Ä–∞–±–æ—Ç–æ–∫:

* Webhook-—Ä–µ–∂–∏–º –¥–ª—è Telegram,
* –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è, —ç—Å–∫–∞–ª–∞—Ü–∏–∏),
* –≠–∫—Å–ø–æ—Ä—Ç –≤ Slack/Email,
* –ê–≤—Ç–æ-–¥–∏—Å–∫–∞–≤–µ—Ä–∏ —Ö–æ—Å—Ç–æ–≤ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è,
* –ì–∏–±–∫–∏–µ Grafana-–¥–∞—à–±–æ—Ä–¥—ã.

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT (–ø—Ä–∏–º–µ—Ä):

```
MIT License

Copyright (c) <year> <you>

Permission is hereby granted, free of charge, to any person obtaining a copy
...
```

---

## üôã FAQ

**Q:** –ö–∞–∫ —É–∑–Ω–∞—Ç—å –º–æ–π `chat_id`?
**A:** –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É `/whoami`.

**Q:** –ö–∞–∫ –¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –±—ã—Å—Ç—Ä–æ?
**A:** `/grantidx <chat_id> 1,3-5` ‚Äî –ø–æ –Ω–æ–º–µ—Ä–∞–º –∏–∑ `/resources`.

**Q:** –ü–æ–º–µ–Ω—è–ª–∏ TZ ‚Äî –ø–æ—á–µ–º—É –æ—Ç—á—ë—Ç—ã –µ—â—ë –ø–æ —Å—Ç–∞—Ä–æ–º—É?
**A:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ `/rebuildcron` (–∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `./install_monitor.sh`, –æ–Ω –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç cron).

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –¥–æ–±–∞–≤–ª—é –≤ README —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –æ—Ç—á—ë—Ç–æ–≤/–ø—Ä–∏–º–µ—Ä –ø–∞–Ω–µ–ª–∏ Grafana.
